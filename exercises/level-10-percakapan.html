<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Level 10: Percakapan Sederhana - Sikabayan</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
      .exercise-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem;
        min-height: 100vh;
        background: var(--bg);
      }
      .exercise-header {
        text-align: center;
        margin-bottom: 2rem;
        padding: 2rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .exercise-header h1 {
        color: var(--text-color);
        margin-bottom: 0.5rem;
      }
      .exercise-header h1 span {
        color: var(--primary);
      }
      .level-info {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }
      .info-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-color);
        opacity: 0.8;
      }
      .progress-container {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 0.5rem;
      }
      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        width: 0%;
        transition: width 0.3s ease;
      }
      .progress-text {
        color: var(--text-color);
        text-align: center;
        font-weight: 600;
      }
      .question-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        display: none;
      }
      .question-card.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .question-number {
        color: var(--primary);
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }
      .question-text {
        color: var(--text-color);
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }
      .dialogue-box {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 0.5rem;
        padding: 1.5rem;
        margin: 1.5rem 0;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .dialogue-line {
        margin-bottom: 1rem;
        display: flex;
        align-items: flex-start;
        gap: 1rem;
      }
      .dialogue-speaker {
        font-weight: bold;
        color: var(--primary);
        min-width: 80px;
      }
      .dialogue-sunda {
        font-size: 1.1rem;
        color: var(--primary);
        font-family: "Times New Roman", serif;
      }
      .dialogue-latin {
        color: var(--text-color);
        font-size: 1rem;
        margin-left: 1.5rem;
        opacity: 0.8;
      }
      .options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }
      .option {
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }
      .option:hover {
        border-color: var(--primary);
        background: rgba(32, 147, 164, 0.1);
      }
      .option.selected {
        border-color: var(--primary);
        background: rgba(32, 147, 164, 0.2);
      }
      .option.correct {
        border-color: #10b981;
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
      }
      .option.incorrect {
        border-color: #ef4444;
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
      }
      .controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 2rem;
      }
      .btn {
        padding: 0.8rem 2rem;
        border: none;
        border-radius: 0.5rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      .btn-primary {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(32, 147, 164, 0.4);
      }
      .btn-secondary {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-color);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }
      .btn-secondary:hover {
        background: rgba(255, 255, 255, 0.2);
      }
      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
      .feedback {
        margin-top: 1rem;
        padding: 1rem;
        border-radius: 0.5rem;
        display: none;
      }
      .feedback.correct {
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid #10b981;
        color: #10b981;
      }
      .feedback.incorrect {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid #ef4444;
        color: #ef4444;
      }
      .result-screen {
        display: none;
        text-align: center;
      }
      .result-screen.show {
        display: block;
      }
      .score-display {
        font-size: 3rem;
        font-weight: 700;
        color: var(--primary);
        margin: 1rem 0;
      }
      .result-message {
        font-size: 1.2rem;
        color: var(--text-color);
        margin-bottom: 2rem;
      }
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }
      .stat-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 1rem;
        border-radius: 0.5rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }
      .stat-number {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 0.5rem;
      }
      .stat-label {
        color: var(--text-color);
        opacity: 0.8;
        font-size: 0.9rem;
      }
      @media (max-width: 768px) {
        .exercise-container {
          padding: 1rem;
        }
        .level-info {
          gap: 1rem;
        }
        .controls {
          flex-direction: column;
          gap: 1rem;
        }
        .options {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="exercise-container">
      <div class="exercise-header">
        <h1><span>Level 10:</span> Percakapan Sederhana Aksara Sunda</h1>
        <p>Latihan membaca dan memahami dialog sederhana dalam aksara Sunda</p>
        <div class="level-info">
          <div class="info-item">
            <i data-feather="target"></i><span>Target: 80% untuk lulus</span>
          </div>
          <div class="info-item">
            <i data-feather="clock"></i><span>Waktu: ~30 menit</span>
          </div>
          <div class="info-item">
            <i data-feather="users"></i><span>7 Soal</span>
          </div>
        </div>
      </div>
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">Soal 1 dari 7</div>
      </div>
      <div id="quizContainer"></div>
      <div class="result-screen" id="resultScreen">
        <div class="question-card">
          <h2>üéâ Level 10 Selesai!</h2>
          <div class="score-display" id="finalScore">90/100</div>
          <div class="result-message" id="resultMessage">
            Hebat! Anda sudah mampu memahami percakapan sederhana dalam aksara
            Sunda.
          </div>
          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-number" id="correctAnswers">6</div>
              <div class="stat-label">Jawaban Benar</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="incorrectAnswers">1</div>
              <div class="stat-label">Jawaban Salah</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="timeTaken">28:30</div>
              <div class="stat-label">Waktu</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="accuracy">90%</div>
              <div class="stat-label">Akurasi</div>
            </div>
          </div>
          <div class="controls">
            <button
              class="btn btn-secondary"
              onclick="window.location.href='../latihan.html'"
            >
              <i data-feather="arrow-left"></i> Kembali ke Menu
            </button>
            <button class="btn btn-primary" onclick="nextLevel()">
              Level Selanjutnya <i data-feather="arrow-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
    <script>
      const quizData = [
        {
          question: "Bacalah dialog berikut dan pilih arti yang benar:",
          type: "dialogue_reading",
          dialogue: [
            {
              speaker: "Asep",
              sunda: "·ÆÉ·Æû·Æ®·Æï·Æ™: ·Æû·Æ•·Æõ·Æí ·ÆÉ·Æò·Æì·Æ§!",
              latin: "Asep: Surat abdi!",
            },
            {
              speaker: "Dewi",
              sunda: "·Æì·Æ¶·Æù·Æ§: ·Æû·Æ•·Æõ·Æí ·Æû·Æ•·Æõ·Æí?",
              latin: "Dewi: Surat surat?",
            },
            {
              speaker: "Asep",
              sunda: "·ÆÉ·Æû·Æ®·Æï·Æ™: ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû ·Æû·Æ•·Æõ·Æí.",
              latin: "Asep: Surat nulis surat.",
            },
          ],
          options: [
            {
              content:
                "Asep sedang menulis surat dan Dewi bertanya tentang surat itu.",
              correct: true,
            },
            { content: "Dewi menulis surat untuk Asep.", correct: false },
            { content: "Asep membaca surat dari Dewi.", correct: false },
            { content: "Dewi mengirim surat ke Asep.", correct: false },
          ],
          explanation:
            "Dialog menunjukkan Asep menulis surat dan Dewi bertanya tentang surat tersebut.",
        },
        {
          question:
            "Pilih jawaban yang benar untuk melanjutkan dialog berikut:",
          type: "dialogue_completion",
          dialogue: [
            {
              speaker: "Budi",
              sunda: "·Æò·Æ•·Æì·Æ§: ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû ·Æû·Æ•·Æõ·Æí?",
              latin: "Budi: Surat nulis surat?",
            },
            {
              speaker: "Ani",
              sunda: "·ÆÉ·Æî·Æ§: ·Æû·Æ•·Æõ·Æí ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû.",
              latin: "Ani: Surat surat nulis.",
            },
          ],
          options: [
            {
              content:
                "Budi bertanya apakah Ani menulis surat dan Ani menjawab ya.",
              correct: true,
            },
            {
              content: "Ani bertanya kepada Budi tentang surat.",
              correct: false,
            },
            { content: "Budi mengirim surat ke Ani.", correct: false },
            { content: "Ani membaca surat dari Budi.", correct: false },
          ],
          explanation:
            "Budi bertanya dan Ani mengonfirmasi bahwa dia menulis surat.",
        },
        {
          question:
            "Susun urutan dialog berikut agar menjadi percakapan yang logis:",
          type: "dialogue_order",
          dialogue: [
            {
              speaker: "Cici",
              sunda: "·Æé·Æ§·Æé·Æ§: ·Æû·Æ•·Æõ·Æí ·ÆÉ·Æò·Æì·Æ§?",
              latin: "Cici: Surat abdi?",
            },
            {
              speaker: "Dadan",
              sunda: "·Æì·Æì·Æî·Æ™: ·ÆÉ·Æò·Æì·Æ§ ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû.",
              latin: "Dadan: Abdi surat nulis.",
            },
            {
              speaker: "Cici",
              sunda: "·Æé·Æ§·Æé·Æ§: ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû ·Æû·Æ•·Æõ·Æí?",
              latin: "Cici: Surat nulis surat?",
            },
          ],
          correctOrder: [0, 2, 1],
          options: [
            {
              content: "Cici bertanya, lalu bertanya lagi, Dadan menjawab.",
              correct: true,
            },
            {
              content: "Dadan menjawab dulu, lalu Cici bertanya dua kali.",
              correct: false,
            },
            {
              content:
                "Cici bertanya, Dadan menjawab, lalu Cici bertanya lagi.",
              correct: false,
            },
            { content: "Urutan tidak penting.", correct: false },
          ],
          explanation:
            "Urutan logis: Cici bertanya, bertanya lagi, lalu Dadan menjawab.",
        },
        {
          question: "Pilih terjemahan yang benar dari dialog berikut:",
          type: "dialogue_translation",
          dialogue: [
            {
              speaker: "Euis",
              sunda: "·ÆÑ·ÆÖ·Æ§·Æû·Æ™: ·ÆÉ·Æò·Æì·Æ§ ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû?",
              latin: "Euis: Abdi surat nulis?",
            },
            {
              speaker: "Fajar",
              sunda: "·Æñ·Æè·ÆÅ: ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû ·ÆÉ·Æò·Æì·Æ§.",
              latin: "Fajar: Surat nulis abdi.",
            },
          ],
          options: [
            {
              content:
                "Euis bertanya apakah dia menulis surat, Fajar menjawab ya.",
              correct: true,
            },
            {
              content: "Fajar bertanya kepada Euis tentang surat.",
              correct: false,
            },
            { content: "Euis mengirim surat ke Fajar.", correct: false },
            { content: "Fajar membaca surat dari Euis.", correct: false },
          ],
          explanation: "Dialog: Euis bertanya, Fajar mengonfirmasi.",
        },
        {
          question: "Lengkapi dialog berikut dengan pilihan yang tepat:",
          type: "dialogue_fill",
          dialogue: [
            {
              speaker: "Gilang",
              sunda: "·Æå·Æ§·Æú·ÆÄ: ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû ___?",
              latin: "Gilang: Surat nulis ___?",
            },
          ],
          choices: ["·ÆÉ·Æò·Æì·Æ§", "·Æû·Æ•·Æõ·Æí", "·Æî·Æ•·Æú·Æ§·Æû", "·ÆÑ·ÆÖ·Æ§·Æû·Æ™"],
          correct: 0,
          options: [
            { content: "abdi", correct: true },
            { content: "surat", correct: false },
            { content: "nulis", correct: false },
            { content: "euis", correct: false },
          ],
          explanation:
            "Dialog lengkap: Surat nulis abdi? (Apakah saya menulis surat?)",
        },
        {
          question: "Pilih jawaban yang benar untuk menanggapi dialog berikut:",
          type: "dialogue_response",
          dialogue: [
            {
              speaker: "Hana",
              sunda: "·Æ†·Æî: ·Æû·Æ•·Æõ·Æí ·Æî·Æ•·Æú·Æ§·Æû ·ÆÉ·Æò·Æì·Æ§?",
              latin: "Hana: Surat nulis abdi?",
            },
          ],
          options: [
            { content: "Muhun, abdi nulis surat.", correct: true },
            { content: "Henteu, abdi henteu nulis surat.", correct: false },
            { content: "Abdi maca buku.", correct: false },
            { content: "Abdi indit ka sakola.", correct: false },
          ],
          explanation: "Jawaban yang benar: Muhun, abdi nulis surat.",
        },
        {
          question: "Apa tema utama dari percakapan-percakapan di atas?",
          type: "dialogue_theme",
          options: [
            {
              content: "Menulis surat dalam kehidupan sehari-hari.",
              correct: true,
            },
            { content: "Pergi ke sekolah.", correct: false },
            { content: "Membaca buku.", correct: false },
            { content: "Berlibur ke Lembang.", correct: false },
          ],
          explanation: "Semua dialog berfokus pada aktivitas menulis surat.",
        },
      ];
      let currentQuestion = 0;
      let score = 0;
      let userAnswers = [];
      let startTime = Date.now();
      function initializeQuiz() {
        generateQuizHTML();
        showQuestion(0);
        updateProgress();
      }
      function generateQuizHTML() {
        const container = document.getElementById("quizContainer");
        container.innerHTML = "";
        quizData.forEach((question, index) => {
          let questionHTML = `
                    <div class="question-card" id="question-${index}">
                        <div class="question-number">Soal ${index + 1} dari ${
            quizData.length
          }</div>
                        <div class="question-text">${question.question}</div>
                `;
          if (question.dialogue) {
            questionHTML += `<div class="dialogue-box">`;
            question.dialogue.forEach((line) => {
              questionHTML += `<div class="dialogue-line"><div class="dialogue-speaker">${line.speaker}:</div><div><div class="dialogue-sunda">${line.sunda}</div><div class="dialogue-latin">${line.latin}</div></div></div>`;
            });
            questionHTML += `</div>`;
          }
          if (question.type === "dialogue_fill") {
            questionHTML += `<div class="options" id="options-${index}">`;
            question.choices.forEach((choice, choiceIndex) => {
              questionHTML += `<div class="option" onclick="selectAnswer(${index}, ${choiceIndex})">${choice}</div>`;
            });
            questionHTML += `</div>`;
          } else {
            questionHTML += `<div class="options" id="options-${index}">`;
            question.options.forEach((option, optionIndex) => {
              questionHTML += `<div class="option" onclick="selectAnswer(${index}, ${optionIndex})"><div class="option-content">${option.content}</div></div>`;
            });
            questionHTML += `</div>`;
          }
          questionHTML += `
                        <div class="feedback" id="feedback-${index}"></div>
                        <div class="controls">
                            <button class="btn btn-secondary" onclick="previousQuestion()" ${
                              index === 0 ? 'style="visibility: hidden"' : ""
                            }><i data-feather="arrow-left"></i> Sebelumnya</button>
                            <button class="btn btn-primary" id="nextBtn-${index}" onclick="nextQuestion()" disabled>${
            index === quizData.length - 1 ? "Selesai" : "Selanjutnya"
          } <i data-feather="arrow-right"></i></button>
                        </div>
                    </div>
                `;
          container.innerHTML += questionHTML;
        });
      }
      function selectAnswer(questionIndex, answerIndex) {
        const options = document.querySelectorAll(
          `#options-${questionIndex} .option`
        );
        const question = quizData[questionIndex];
        options.forEach((option) => {
          option.classList.remove("selected", "correct", "incorrect");
        });
        options[answerIndex].classList.add("selected");
        userAnswers[questionIndex] = answerIndex;
        let isCorrect = false;
        if (question.type === "dialogue_fill") {
          isCorrect = answerIndex === question.correct;
        } else {
          isCorrect = question.options[answerIndex].correct;
        }
        if (isCorrect) {
          options[answerIndex].classList.add("correct");
          score += Math.round(100 / quizData.length);
          showFeedback(
            questionIndex,
            "correct",
            "‚úì Benar! " + question.explanation
          );
        } else {
          options[answerIndex].classList.add("incorrect");
          if (question.type !== "dialogue_fill") {
            question.options.forEach((option, index) => {
              if (option.correct) {
                options[index].classList.add("correct");
              }
            });
          }
          showFeedback(
            questionIndex,
            "incorrect",
            "‚úó Salah. " + question.explanation
          );
        }
        document.getElementById(`nextBtn-${questionIndex}`).disabled = false;
      }
      function showFeedback(questionIndex, type, message) {
        const feedback = document.getElementById(`feedback-${questionIndex}`);
        feedback.className = `feedback ${type}`;
        feedback.innerHTML = message;
        feedback.style.display = "block";
      }
      function showQuestion(index) {
        document.querySelectorAll(".question-card").forEach((card) => {
          card.classList.remove("active");
        });
        document.getElementById(`question-${index}`).classList.add("active");
        updateProgress();
        feather.replace();
      }
      function nextQuestion() {
        if (currentQuestion < quizData.length - 1) {
          currentQuestion++;
          showQuestion(currentQuestion);
        } else {
          showResults();
        }
      }
      function previousQuestion() {
        if (currentQuestion > 0) {
          currentQuestion--;
          showQuestion(currentQuestion);
        }
      }
      function updateProgress() {
        const progress = (currentQuestion / quizData.length) * 100;
        document.getElementById("progressFill").style.width = progress + "%";
        document.getElementById("progressText").textContent = `Soal ${
          currentQuestion + 1
        } dari ${quizData.length}`;
      }
      function showResults() {
        const endTime = Date.now();
        const timeTaken = Math.floor((endTime - startTime) / 1000);
        const minutes = Math.floor(timeTaken / 60);
        const seconds = timeTaken % 60;
        const correctCount = Math.round(score / (100 / quizData.length));
        const incorrectCount = quizData.length - correctCount;
        document.getElementById("quizContainer").style.display = "none";
        document.querySelector(".progress-container").style.display = "none";
        document.getElementById("resultScreen").classList.add("show");
        document.getElementById("finalScore").textContent = score + "/100";
        document.getElementById("correctAnswers").textContent = correctCount;
        document.getElementById("incorrectAnswers").textContent =
          incorrectCount;
        document.getElementById("timeTaken").textContent = `${minutes}:${seconds
          .toString()
          .padStart(2, "0")}`;
        document.getElementById("accuracy").textContent = score + "%";
        let message = "";
        if (score >= 90) {
          message =
            "üåü Luar biasa! Anda sangat mahir memahami percakapan aksara Sunda!";
        } else if (score >= 80) {
          message = "üëè Hebat! Anda sudah mampu memahami dialog sederhana.";
        } else if (score >= 70) {
          message =
            "üëç Bagus! Terus berlatih memahami percakapan yang lebih kompleks.";
        } else {
          message =
            "üí™ Jangan menyerah! Latihan dialog akan meningkatkan pemahaman Anda.";
        }
        document.getElementById("resultMessage").textContent = message;
        feather.replace();
      }
      function nextLevel() {
        window.location.href = "level-11-percakapan-lanjutan.html";
      }
      document.addEventListener("DOMContentLoaded", function () {
        initializeQuiz();
        feather.replace();
      });
    </script>
  </body>
</html>
