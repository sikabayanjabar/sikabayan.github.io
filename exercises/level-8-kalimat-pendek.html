<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Level 8: Kalimat Pendek - Sikabayan</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap"
      rel="stylesheet"
    />

    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="../css/style.css" />

    <style>
      /* Exercise specific styles */
      .exercise-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 2rem;
        min-height: 100vh;
        background: var(--bg);
      }

      .exercise-header {
        text-align: center;
        margin-bottom: 2rem;
        padding: 2rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .exercise-header h1 {
        color: var(--text-color);
        margin-bottom: 0.5rem;
      }

      .exercise-header h1 span {
        color: var(--primary);
      }

      .level-info {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }

      .info-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-color);
        opacity: 0.8;
      }

      .progress-container {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 0.5rem;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        width: 0%;
        transition: width 0.3s ease;
      }

      .progress-text {
        color: var(--text-color);
        text-align: center;
        font-weight: 600;
      }

      .question-card {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        display: none;
      }

      .question-card.active {
        display: block;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .question-number {
        color: var(--primary);
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 1rem;
      }

      .question-text {
        color: var(--text-color);
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        line-height: 1.6;
      }

      .sentence-showcase {
        background: rgba(255, 255, 255, 0.02);
        border-radius: 0.5rem;
        padding: 2rem;
        margin: 2rem 0;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .sentence-display {
        text-align: center;
        padding: 2rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 0.5rem;
        border: 2px solid var(--primary);
        margin-bottom: 1.5rem;
      }

      .sunda-sentence {
        font-size: 2rem;
        color: var(--primary);
        font-family: "Times New Roman", serif;
        margin-bottom: 1rem;
        line-height: 1.4;
      }

      .latin-sentence {
        color: var(--text-color);
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
      }

      .sentence-meaning {
        color: var(--text-color);
        opacity: 0.8;
        font-size: 1rem;
        font-style: italic;
      }

      .word-breakdown {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .word-item {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 0.3rem;
        padding: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        text-align: center;
      }

      .word-sunda {
        font-size: 1.5rem;
        color: var(--primary);
        font-family: "Times New Roman", serif;
        margin-bottom: 0.5rem;
      }

      .word-latin {
        color: var(--text-color);
        font-weight: 600;
        margin-bottom: 0.3rem;
      }

      .word-meaning {
        color: var(--text-color);
        opacity: 0.7;
        font-size: 0.9rem;
      }

      .sentence-construction {
        background: rgba(255, 255, 255, 0.02);
        border-radius: 0.5rem;
        padding: 2rem;
        margin: 2rem 0;
        border: 2px dashed rgba(255, 255, 255, 0.2);
      }

      .construction-title {
        text-align: center;
        color: var(--primary);
        font-weight: 600;
        margin-bottom: 1.5rem;
      }

      .word-bank {
        background: rgba(255, 255, 255, 0.02);
        border-radius: 0.3rem;
        padding: 1rem;
        margin-bottom: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .bank-title {
        color: var(--text-color);
        font-weight: 600;
        margin-bottom: 1rem;
        text-align: center;
      }

      .word-options {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
      }

      .word-option {
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.3rem;
        padding: 0.8rem 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }

      .word-option:hover {
        border-color: var(--primary);
        background: rgba(32, 147, 164, 0.1);
      }

      .word-option.selected {
        border-color: var(--primary);
        background: rgba(32, 147, 164, 0.2);
      }

      .word-option.used {
        opacity: 0.3;
        cursor: not-allowed;
      }

      .option-sunda {
        font-size: 1.2rem;
        font-family: "Times New Roman", serif;
        color: var(--primary);
        margin-bottom: 0.2rem;
      }

      .option-latin {
        color: var(--text-color);
        font-size: 0.8rem;
      }

      .sentence-builder {
        background: rgba(255, 255, 255, 0.05);
        border: 2px dashed rgba(255, 255, 255, 0.2);
        border-radius: 0.3rem;
        padding: 1.5rem;
        min-height: 100px;
        margin-bottom: 1rem;
      }

      .builder-title {
        color: var(--text-color);
        font-weight: 600;
        margin-bottom: 1rem;
        text-align: center;
      }

      .constructed-sentence {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
        align-items: center;
        min-height: 60px;
      }

      .constructed-word {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid var(--primary);
        border-radius: 0.3rem;
        padding: 0.5rem 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .constructed-word:hover {
        background: rgba(239, 68, 68, 0.2);
        border-color: #ef4444;
      }

      .constructed-sunda {
        font-size: 1.2rem;
        font-family: "Times New Roman", serif;
        color: var(--primary);
        margin-bottom: 0.2rem;
      }

      .constructed-latin {
        color: var(--text-color);
        font-size: 0.8rem;
      }

      .sentence-result {
        text-align: center;
        margin-top: 1rem;
        padding: 1rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 0.3rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .result-sunda {
        font-size: 1.8rem;
        color: var(--primary);
        font-family: "Times New Roman", serif;
        margin-bottom: 0.5rem;
      }

      .result-latin {
        color: var(--text-color);
        font-weight: 600;
      }

      .options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }

      .option {
        padding: 1.5rem;
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(255, 255, 255, 0.1);
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }

      .option:hover {
        border-color: var(--primary);
        background: rgba(32, 147, 164, 0.1);
      }

      .option.selected {
        border-color: var(--primary);
        background: rgba(32, 147, 164, 0.2);
      }

      .option.correct {
        border-color: #10b981;
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
      }

      .option.incorrect {
        border-color: #ef4444;
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
      }

      .option-sentence-sunda {
        font-size: 1.5rem;
        font-family: "Times New Roman", serif;
        margin-bottom: 0.5rem;
      }

      .option-sentence-latin {
        color: var(--text-color);
        font-weight: 600;
        margin-bottom: 0.3rem;
      }

      .option-sentence-meaning {
        color: var(--text-color);
        opacity: 0.7;
        font-size: 0.9rem;
        font-style: italic;
      }

      .controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 2rem;
      }

      .btn {
        padding: 0.8rem 2rem;
        border: none;
        border-radius: 0.5rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(32, 147, 164, 0.4);
      }

      .btn-secondary {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-color);
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .btn-secondary:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .feedback {
        margin-top: 1rem;
        padding: 1rem;
        border-radius: 0.5rem;
        display: none;
      }

      .feedback.correct {
        background: rgba(16, 185, 129, 0.1);
        border: 1px solid #10b981;
        color: #10b981;
      }

      .feedback.incorrect {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid #ef4444;
        color: #ef4444;
      }

      .result-screen {
        display: none;
        text-align: center;
      }

      .result-screen.show {
        display: block;
      }

      .score-display {
        font-size: 3rem;
        font-weight: 700;
        color: var(--primary);
        margin: 1rem 0;
      }

      .result-message {
        font-size: 1.2rem;
        color: var(--text-color);
        margin-bottom: 2rem;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 1rem;
        margin: 2rem 0;
      }

      .stat-item {
        background: rgba(255, 255, 255, 0.05);
        padding: 1rem;
        border-radius: 0.5rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .stat-number {
        font-size: 1.5rem;
        font-weight: 600;
        color: var(--primary);
        margin-bottom: 0.5rem;
      }

      .stat-label {
        color: var(--text-color);
        opacity: 0.8;
        font-size: 0.9rem;
      }

      /* Mobile responsiveness */
      @media (max-width: 768px) {
        .exercise-container {
          padding: 1rem;
        }

        .level-info {
          gap: 1rem;
        }

        .sunda-sentence {
          font-size: 1.5rem;
        }

        .word-options {
          flex-direction: column;
        }

        .constructed-sentence {
          flex-direction: column;
        }

        .controls {
          flex-direction: column;
          gap: 1rem;
        }

        .options {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="exercise-container">
      <!-- Exercise Header -->
      <div class="exercise-header">
        <h1><span>Level 8:</span> Kalimat Pendek Aksara Sunda</h1>
        <p>
          Pelajari cara membaca dan menyusun kalimat pendek dalam aksara Sunda
        </p>
        <div class="level-info">
          <div class="info-item">
            <i data-feather="target"></i>
            <span>Target: 80% untuk lulus</span>
          </div>
          <div class="info-item">
            <i data-feather="clock"></i>
            <span>Waktu: ~25 menit</span>
          </div>
          <div class="info-item">
            <i data-feather="message-square"></i>
            <span>8 Soal</span>
          </div>
        </div>
      </div>

      <!-- Progress Bar -->
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">Soal 1 dari 8</div>
      </div>

      <!-- Quiz Container -->
      <div id="quizContainer">
        <!-- Questions will be generated by JavaScript -->
      </div>

      <!-- Result Screen -->
      <div class="result-screen" id="resultScreen">
        <div class="question-card">
          <h2>üéâ Level 8 Selesai!</h2>
          <div class="score-display" id="finalScore">88/100</div>
          <div class="result-message" id="resultMessage">
            Bagus! Anda sudah mampu membaca dan menyusun kalimat pendek dalam
            aksara Sunda.
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-number" id="correctAnswers">7</div>
              <div class="stat-label">Jawaban Benar</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="incorrectAnswers">1</div>
              <div class="stat-label">Jawaban Salah</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="timeTaken">23:15</div>
              <div class="stat-label">Waktu</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="accuracy">88%</div>
              <div class="stat-label">Akurasi</div>
            </div>
          </div>

          <div class="controls">
            <button
              class="btn btn-secondary"
              onclick="window.location.href='../latihan.html'"
            >
              <i data-feather="arrow-left"></i> Kembali ke Menu
            </button>
            <button class="btn btn-primary" onclick="nextLevel()">
              Level Selanjutnya <i data-feather="arrow-right"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Quiz data
      const quizData = [
        {
          question: "Bacalah kalimat aksara Sunda berikut:",
          type: "sentence_reading",
          targetSentence: "·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ",
          targetLatin: "Kul sakola",
          targetMeaning: "Pergi ke sekolah",
          words: [
            { sunda: "·Æä·Æ•·Æú", latin: "kul", meaning: "pergi" },
            { sunda: "·Æû·Æä·Æß·Æú·ÆÇ", latin: "sakola", meaning: "sekolah" },
          ],
          options: [
            {
              sunda: "·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ",
              latin: "Kul sakola",
              meaning: "Pergi ke sekolah",
              correct: true,
            },
            {
              sunda: "·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ",
              latin: "Kul sakola",
              meaning: "Pulang sekolah",
              correct: false,
            },
            {
              sunda: "·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ",
              latin: "Kul sakola",
              meaning: "Di sekolah",
              correct: false,
            },
            {
              sunda: "·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ",
              latin: "Kul sakola",
              meaning: "Dari sekolah",
              correct: false,
            },
          ],
          explanation:
            "Kalimat '·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ' dibaca 'Kul sakola' yang berarti 'Pergi ke sekolah'.",
        },
        {
          question:
            "Susun kalimat 'Abdi maca buku' (Saya membaca buku) dalam aksara Sunda:",
          type: "sentence_construction",
          targetSentence: "·ÆÉ·Æò·Æì·Æ§ ·Æô·Æé ·Æò·Æ•·Æä·Æ•",
          targetLatin: "Abdi maca buku",
          targetMeaning: "Saya membaca buku",
          wordBank: [
            { sunda: "·ÆÉ·Æò·Æì·Æ§", latin: "abdi", meaning: "saya" },
            { sunda: "·Æô·Æé", latin: "maca", meaning: "membaca" },
            { sunda: "·Æò·Æ•·Æä·Æ•", latin: "buku", meaning: "buku" },
            { sunda: "·Æî·Æ•·Æú·Æ§·Æû", latin: "nulis", meaning: "menulis" },
            { sunda: "·Æû·Æ•·Æõ·Æí", latin: "surat", meaning: "surat" },
            { sunda: "·Æå·Æ•·Æõ·Æ•", latin: "guru", meaning: "guru" },
          ],
          correctOrder: ["·ÆÉ·Æò·Æì·Æ§", "·Æô·Æé", "·Æò·Æ•·Æä·Æ•"],
          explanation:
            "Kalimat 'Abdi maca buku' disusun dari kata ·ÆÉ·Æò·Æì·Æ§ (abdi/saya) + ·Æô·Æé (maca/membaca) + ·Æò·Æ•·Æä·Æ• (buku).",
        },
        {
          question: "Pilih arti yang tepat untuk kalimat: ·Æò·Æï ·Æû·Æû·ÆÇ ·Æå·Æä·ÆÅ",
          type: "sentence_comprehension",
          targetSentence: "·Æò·Æï ·Æû·Æû·ÆÇ ·Æå·Æä·ÆÅ",
          targetLatin: "Bapa sasap geko",
          words: [
            { sunda: "·Æò·Æï", latin: "bapa", meaning: "ayah" },
            { sunda: "·Æû·Æû·ÆÇ", latin: "sasap", meaning: "sedang" },
            { sunda: "·Æå·Æä·ÆÅ", latin: "geko", meaning: "bekerja" },
          ],
          options: [
            {
              sunda: "·Æò·Æï ·Æû·Æû·ÆÇ ·Æå·Æä·ÆÅ",
              latin: "Bapa sasap geko",
              meaning: "Ayah sedang bekerja",
              correct: true,
            },
            {
              sunda: "·Æò·Æï ·Æû·Æû·ÆÇ ·Æå·Æä·ÆÅ",
              latin: "Bapa sasap geko",
              meaning: "Ayah sudah bekerja",
              correct: false,
            },
            {
              sunda: "·Æò·Æï ·Æû·Æû·ÆÇ ·Æå·Æä·ÆÅ",
              latin: "Bapa sasap geko",
              meaning: "Ayah akan bekerja",
              correct: false,
            },
            {
              sunda: "·Æò·Æï ·Æû·Æû·ÆÇ ·Æå·Æä·ÆÅ",
              latin: "Bapa sasap geko",
              meaning: "Ayah tidak bekerja",
              correct: false,
            },
          ],
          explanation:
            "Kalimat '·Æò·Æï ·Æû·Æû·ÆÇ ·Æå·Æä·ÆÅ' berarti 'Ayah sedang bekerja'. '·Æû·Æû·ÆÇ' (sasap) menunjukkan waktu sedang berlangsung.",
        },
        {
          question: "Susun kalimat 'Ibu masak sayur' dalam aksara Sunda:",
          type: "sentence_construction",
          targetSentence: "·ÆÑ·Æò·Æ• ·Æô·Æû·Æä·Æ™ ·Æû·Æ°·Æ•·ÆÅ",
          targetLatin: "Ibu masak sayur",
          targetMeaning: "Ibu memasak sayur",
          wordBank: [
            { sunda: "·ÆÑ·Æò·Æ•", latin: "ibu", meaning: "ibu" },
            { sunda: "·Æô·Æû·Æä·Æ™", latin: "masak", meaning: "memasak" },
            { sunda: "·Æû·Æ°·Æ•·ÆÅ", latin: "sayur", meaning: "sayur" },
            { sunda: "·Æò·Æ¶·Æû·Æ§", latin: "besi", meaning: "besi" },
            { sunda: "·Æî·Æû·Æ§", latin: "nasi", meaning: "nasi" },
            { sunda: "·Æô·Æ§·Æî·Æ•·Æô·Æ™", latin: "minum", meaning: "minum" },
          ],
          correctOrder: ["·ÆÑ·Æò·Æ•", "·Æô·Æû·Æä·Æ™", "·Æû·Æ°·Æ•·ÆÅ"],
          explanation:
            "Kalimat 'Ibu masak sayur' disusun dari ·ÆÑ·Æò·Æ• (ibu) + ·Æô·Æû·Æä·Æ™ (masak) + ·Æû·Æ°·Æ•·ÆÅ (sayur).",
        },
        {
          question: "Bacalah dan pilih terjemahan yang benar: ·ÆÉ·Æî·Æä·Æ™ ·Æò·Æ®·Æú ·Æè·ÆÅ",
          type: "sentence_translation",
          targetSentence: "·ÆÉ·Æî·Æä·Æ™ ·Æò·Æ®·Æú ·Æè·ÆÅ",
          targetLatin: "Anak beli jaje",
          words: [
            { sunda: "·ÆÉ·Æî·Æä·Æ™", latin: "anak", meaning: "anak" },
            { sunda: "·Æò·Æ®·Æú", latin: "beli", meaning: "membeli" },
            { sunda: "·Æè·ÆÅ", latin: "jaje", meaning: "jajanan" },
          ],
          options: [
            {
              sunda: "·ÆÉ·Æî·Æä·Æ™ ·Æò·Æ®·Æú ·Æè·ÆÅ",
              latin: "Anak beli jaje",
              meaning: "Anak membeli jajanan",
              correct: true,
            },
            {
              sunda: "·ÆÉ·Æî·Æä·Æ™ ·Æò·Æ®·Æú ·Æè·ÆÅ",
              latin: "Anak beli jaje",
              meaning: "Anak menjual jajanan",
              correct: false,
            },
            {
              sunda: "·ÆÉ·Æî·Æä·Æ™ ·Æò·Æ®·Æú ·Æè·ÆÅ",
              latin: "Anak beli jaje",
              meaning: "Anak makan jajanan",
              correct: false,
            },
            {
              sunda: "·ÆÉ·Æî·Æä·Æ™ ·Æò·Æ®·Æú ·Æè·ÆÅ",
              latin: "Anak beli jaje",
              meaning: "Anak mencari jajanan",
              correct: false,
            },
          ],
          explanation:
            "Kalimat '·ÆÉ·Æî·Æä·Æ™ ·Æò·Æ®·Æú ·Æè·ÆÅ' berarti 'Anak membeli jajanan'. Kata '·Æò·Æ®·Æú' (beli) berarti membeli.",
        },
        {
          question:
            "Susun kalimat tanya 'Saha eta?' (Siapa itu?) dalam aksara Sunda:",
          type: "sentence_construction",
          targetSentence: "·Æû·Æí ·ÆÑ·Æí?",
          targetLatin: "Saha eta?",
          targetMeaning: "Siapa itu?",
          wordBank: [
            { sunda: "·Æû·Æí", latin: "saha", meaning: "siapa" },
            { sunda: "·ÆÑ·Æí", latin: "eta", meaning: "itu" },
            { sunda: "·ÆÑ·Æö", latin: "ieu", meaning: "ini" },
            { sunda: "·Æî·Æí·Æß·Æî·Æ™", latin: "naon", meaning: "apa" },
            { sunda: "·Æì·Æ§·Æô·Æî", latin: "dimana", meaning: "dimana" },
            { sunda: "·Æä·Æ•·Æú·Æî", latin: "kulan", meaning: "kapan" },
          ],
          correctOrder: ["·Æû·Æí", "·ÆÑ·Æí?"],
          explanation:
            "Kalimat tanya 'Siapa itu?' dalam aksara Sunda adalah '·Æû·Æí ·ÆÑ·Æí?' (Saha eta?).",
        },
        {
          question: "Identifikasi pola kalimat dari: ·Æû·Æ§ ·ÆÉ·Æî·Æ§ ·Æû·Æ®·ÆÄ ·Æû·Æé·ÆÅ",
          type: "sentence_pattern",
          targetSentence: "·Æû·Æ§ ·ÆÉ·Æî·Æ§ ·Æû·Æ®·ÆÄ ·Æû·Æé·ÆÅ",
          targetLatin: "Si Ani seang sacar",
          targetMeaning: "Si Ani sedang belajar",
          words: [
            { sunda: "·Æû·Æ§", latin: "si", meaning: "si" },
            { sunda: "·ÆÉ·Æî·Æ§", latin: "Ani", meaning: "Ani" },
            { sunda: "·Æû·Æ®·ÆÄ", latin: "seang", meaning: "sedang" },
            { sunda: "·Æû·Æé·ÆÅ", latin: "sacar", meaning: "belajar" },
          ],
          options: [
            {
              pattern: "Subjek + Keterangan Waktu + Predikat",
              example: "Si Ani sedang belajar",
              correct: true,
            },
            {
              pattern: "Subjek + Predikat + Objek",
              example: "Si Ani belajar sesuatu",
              correct: false,
            },
            {
              pattern: "Predikat + Subjek + Keterangan",
              example: "Belajar Si Ani sedang",
              correct: false,
            },
            {
              pattern: "Keterangan + Subjek + Predikat",
              example: "Sedang Si Ani belajar",
              correct: false,
            },
          ],
          explanation:
            "Kalimat ini mengikuti pola Subjek (Si Ani) + Keterangan Waktu (sedang) + Predikat (belajar).",
        },
        {
          question: "Pilih kalimat yang gramatikal benar dalam aksara Sunda:",
          type: "grammar_check",
          options: [
            {
              sunda: "·Æô·Æî·Æ®·ÆÇ ·Æä·Æ• ·ÆÉ·Æò·Æì·Æ§ ·Æû·Æä·Æß·Æú·ÆÇ",
              latin: "Maneh ku abdi sakola",
              meaning: "Kamu oleh saya sekolah",
              correct: false,
            },
            {
              sunda: "·ÆÉ·Æò·Æì·Æ§ ·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ",
              latin: "Abdi kul sakola",
              meaning: "Saya pergi ke sekolah",
              correct: true,
            },
            {
              sunda: "·Æû·Æä·Æß·Æú·ÆÇ ·ÆÉ·Æò·Æì·Æ§ ·Æä·Æ•·Æú",
              latin: "Sakola abdi kul",
              meaning: "Sekolah saya pergi",
              correct: false,
            },
            {
              sunda: "·Æä·Æ•·Æú ·ÆÉ·Æò·Æì·Æ§ ·Æû·Æä·Æß·Æú·ÆÇ ·Æû·Æä·Æß·Æú·ÆÇ",
              latin: "Kul abdi sakola sakola",
              meaning: "Pergi saya sekolah sekolah",
              correct: false,
            },
          ],
          explanation:
            "Kalimat yang benar adalah '·ÆÉ·Æò·Æì·Æ§ ·Æä·Æ•·Æú ·Æû·Æä·Æß·Æú·ÆÇ' (Abdi kul sakola) dengan pola Subjek + Predikat + Keterangan tempat.",
        },
      ];

      let currentQuestion = 0;
      let score = 0;
      let userAnswers = [];
      let startTime = Date.now();
      let constructedSentence = [];

      function initializeQuiz() {
        generateQuizHTML();
        showQuestion(0);
        updateProgress();
      }

      function generateQuizHTML() {
        const container = document.getElementById("quizContainer");
        container.innerHTML = "";

        quizData.forEach((question, index) => {
          let questionHTML = `
                    <div class="question-card" id="question-${index}">
                        <div class="question-number">Soal ${index + 1} dari ${
            quizData.length
          }</div>
                        <div class="question-text">${question.question}</div>
                `;

          // Add sentence showcase for reading questions
          if (
            question.type === "sentence_reading" ||
            question.type === "sentence_comprehension" ||
            question.type === "sentence_translation" ||
            question.type === "sentence_pattern"
          ) {
            questionHTML += `
                        <div class="sentence-showcase">
                            <div class="sentence-display">
                                <div class="sunda-sentence">${
                                  question.targetSentence
                                }</div>
                                <div class="latin-sentence">${
                                  question.targetLatin || "?"
                                }</div>
                                <div class="sentence-meaning">${
                                  question.targetMeaning || "Tentukan artinya"
                                }</div>
                            </div>
                            ${
                              question.words
                                ? `
                                <div class="word-breakdown">
                                    ${question.words
                                      .map(
                                        (word) => `
                                        <div class="word-item">
                                            <div class="word-sunda">${word.sunda}</div>
                                            <div class="word-latin">${word.latin}</div>
                                            <div class="word-meaning">${word.meaning}</div>
                                        </div>
                                    `
                                      )
                                      .join("")}
                                </div>
                            `
                                : ""
                            }
                        </div>
                    `;
          }

          // Add construction area for sentence building questions
          if (question.type === "sentence_construction") {
            questionHTML += `
                        <div class="sentence-construction">
                            <div class="construction-title">Susun kalimat "${
                              question.targetLatin
                            }" dari kata-kata berikut:</div>
                            <div class="word-bank">
                                <div class="bank-title">Bank Kata:</div>
                                <div class="word-options" id="word-options-${index}">
                                    ${question.wordBank
                                      .map(
                                        (word, wordIndex) => `
                                        <div class="word-option" onclick="selectWord(${index}, ${wordIndex}, '${word.sunda}', '${word.latin}')">
                                            <div class="option-sunda">${word.sunda}</div>
                                            <div class="option-latin">${word.latin}</div>
                                        </div>
                                    `
                                      )
                                      .join("")}
                                </div>
                            </div>
                            <div class="sentence-builder">
                                <div class="builder-title">Kalimat yang disusun:</div>
                                <div class="constructed-sentence" id="constructed-sentence-${index}">
                                    <div style="color: var(--text-color); opacity: 0.7;">Pilih kata dari bank kata di atas</div>
                                </div>
                            </div>
                            <div class="sentence-result" id="sentence-result-${index}">
                                <div class="result-sunda" id="result-sunda-${index}">?</div>
                                <div class="result-latin" id="result-latin-${index}">Susun kata-kata di atas</div>
                            </div>
                            <button class="btn btn-secondary" onclick="checkSentenceConstruction(${index})" style="margin-top: 1rem;">
                                <i data-feather="check"></i> Periksa Kalimat
                            </button>
                        </div>
                    `;
          } else {
            // Regular options for other question types
            questionHTML += `
                        <div class="options" id="options-${index}">
                            ${question.options
                              .map(
                                (option, optionIndex) => `
                                <div class="option" onclick="selectAnswer(${index}, ${optionIndex})">
                                    ${
                                      option.sunda
                                        ? `<div class="option-sentence-sunda">${option.sunda}</div>`
                                        : ""
                                    }
                                    ${
                                      option.latin
                                        ? `<div class="option-sentence-latin">${option.latin}</div>`
                                        : ""
                                    }
                                    ${
                                      option.meaning
                                        ? `<div class="option-sentence-meaning">${option.meaning}</div>`
                                        : ""
                                    }
                                    ${
                                      option.pattern
                                        ? `<div class="option-sentence-latin">${option.pattern}</div>`
                                        : ""
                                    }
                                    ${
                                      option.example
                                        ? `<div class="option-sentence-meaning">${option.example}</div>`
                                        : ""
                                    }
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    `;
          }

          questionHTML += `
                        <div class="feedback" id="feedback-${index}"></div>
                        
                        <div class="controls">
                            <button class="btn btn-secondary" onclick="previousQuestion()" ${
                              index === 0 ? 'style="visibility: hidden"' : ""
                            }>
                                <i data-feather="arrow-left"></i> Sebelumnya
                            </button>
                            <button class="btn btn-primary" id="nextBtn-${index}" onclick="nextQuestion()" disabled>
                                ${
                                  index === quizData.length - 1
                                    ? "Selesai"
                                    : "Selanjutnya"
                                } 
                                <i data-feather="arrow-right"></i>
                            </button>
                        </div>
                    </div>
                `;

          container.innerHTML += questionHTML;
        });
      }

      function selectWord(questionIndex, wordIndex, sunda, latin) {
        if (!constructedSentence[questionIndex]) {
          constructedSentence[questionIndex] = [];
        }

        const wordElement = document.querySelectorAll(
          `#word-options-${questionIndex} .word-option`
        )[wordIndex];

        if (wordElement.classList.contains("used")) {
          return; // Already used
        }

        // Mark as used
        wordElement.classList.add("used");

        // Add to constructed sentence
        constructedSentence[questionIndex].push({ sunda, latin });

        updateConstructedSentence(questionIndex);
      }

      function updateConstructedSentence(questionIndex) {
        const sentence = constructedSentence[questionIndex] || [];
        const container = document.getElementById(
          `constructed-sentence-${questionIndex}`
        );
        const resultSunda = document.getElementById(
          `result-sunda-${questionIndex}`
        );
        const resultLatin = document.getElementById(
          `result-latin-${questionIndex}`
        );

        if (sentence.length === 0) {
          container.innerHTML =
            '<div style="color: var(--text-color); opacity: 0.7;">Pilih kata dari bank kata di atas</div>';
          resultSunda.textContent = "?";
          resultLatin.textContent = "Susun kata-kata di atas";
        } else {
          container.innerHTML = sentence
            .map(
              (word, index) => `
                    <div class="constructed-word" onclick="removeWord(${questionIndex}, ${index})">
                        <div class="constructed-sunda">${word.sunda}</div>
                        <div class="constructed-latin">${word.latin}</div>
                    </div>
                `
            )
            .join("");

          resultSunda.textContent = sentence.map((w) => w.sunda).join(" ");
          resultLatin.textContent = sentence.map((w) => w.latin).join(" ");
        }
      }

      function removeWord(questionIndex, wordIndex) {
        if (constructedSentence[questionIndex]) {
          const removedWord = constructedSentence[questionIndex][wordIndex];
          constructedSentence[questionIndex].splice(wordIndex, 1);

          // Un-mark the word in the bank
          const wordOptions = document.querySelectorAll(
            `#word-options-${questionIndex} .word-option`
          );
          wordOptions.forEach((option) => {
            if (option.textContent.includes(removedWord.latin)) {
              option.classList.remove("used");
            }
          });

          updateConstructedSentence(questionIndex);
        }
      }

      function checkSentenceConstruction(questionIndex) {
        const question = quizData[questionIndex];
        const userSentence = constructedSentence[questionIndex] || [];

        // Check if the constructed sentence matches the target
        const constructedSunda = userSentence.map((w) => w.sunda).join(" ");
        const isCorrect = constructedSunda === question.targetSentence;

        if (isCorrect) {
          score += Math.round(100 / quizData.length);
          showFeedback(
            questionIndex,
            "correct",
            "‚úì Benar! " + question.explanation
          );
        } else {
          showFeedback(
            questionIndex,
            "incorrect",
            "‚úó Salah. " + question.explanation
          );
        }

        // Enable next button
        document.getElementById(`nextBtn-${questionIndex}`).disabled = false;
      }

      function selectAnswer(questionIndex, answerIndex) {
        const options = document.querySelectorAll(
          `#options-${questionIndex} .option`
        );
        const question = quizData[questionIndex];

        // Remove previous selections
        options.forEach((option) => {
          option.classList.remove("selected", "correct", "incorrect");
        });

        // Mark selected answer
        options[answerIndex].classList.add("selected");

        // Store user answer
        userAnswers[questionIndex] = answerIndex;

        // Check if correct
        const isCorrect = question.options[answerIndex].correct;

        if (isCorrect) {
          options[answerIndex].classList.add("correct");
          score += Math.round(100 / quizData.length);
          showFeedback(
            questionIndex,
            "correct",
            "‚úì Benar! " + question.explanation
          );
        } else {
          options[answerIndex].classList.add("incorrect");
          // Show correct answer
          question.options.forEach((option, index) => {
            if (option.correct) {
              options[index].classList.add("correct");
            }
          });
          showFeedback(
            questionIndex,
            "incorrect",
            "‚úó Salah. " + question.explanation
          );
        }

        // Enable next button
        document.getElementById(`nextBtn-${questionIndex}`).disabled = false;
      }

      function showFeedback(questionIndex, type, message) {
        const feedback = document.getElementById(`feedback-${questionIndex}`);
        feedback.className = `feedback ${type}`;
        feedback.innerHTML = message;
        feedback.style.display = "block";
      }

      function showQuestion(index) {
        // Hide all questions
        document.querySelectorAll(".question-card").forEach((card) => {
          card.classList.remove("active");
        });

        // Show current question
        document.getElementById(`question-${index}`).classList.add("active");

        // Update progress
        updateProgress();

        // Re-initialize feather icons
        feather.replace();
      }

      function nextQuestion() {
        if (currentQuestion < quizData.length - 1) {
          currentQuestion++;
          showQuestion(currentQuestion);
        } else {
          showResults();
        }
      }

      function previousQuestion() {
        if (currentQuestion > 0) {
          currentQuestion--;
          showQuestion(currentQuestion);
        }
      }

      function updateProgress() {
        const progress = (currentQuestion / quizData.length) * 100;
        document.getElementById("progressFill").style.width = progress + "%";
        document.getElementById("progressText").textContent = `Soal ${
          currentQuestion + 1
        } dari ${quizData.length}`;
      }

      function showResults() {
        const endTime = Date.now();
        const timeTaken = Math.floor((endTime - startTime) / 1000);
        const minutes = Math.floor(timeTaken / 60);
        const seconds = timeTaken % 60;

        const correctCount = Math.round(score / (100 / quizData.length));
        const incorrectCount = quizData.length - correctCount;

        // Hide quiz container
        document.getElementById("quizContainer").style.display = "none";
        document.querySelector(".progress-container").style.display = "none";

        // Show results
        document.getElementById("resultScreen").classList.add("show");
        document.getElementById("finalScore").textContent = score + "/100";
        document.getElementById("correctAnswers").textContent = correctCount;
        document.getElementById("incorrectAnswers").textContent =
          incorrectCount;
        document.getElementById("timeTaken").textContent = `${minutes}:${seconds
          .toString()
          .padStart(2, "0")}`;
        document.getElementById("accuracy").textContent = score + "%";

        // Update result message
        let message = "";
        if (score >= 90) {
          message =
            "üåü Luar biasa! Anda sangat mahir dalam kalimat aksara Sunda!";
        } else if (score >= 80) {
          message =
            "üëè Bagus! Anda sudah mampu membaca dan menyusun kalimat pendek.";
        } else if (score >= 70) {
          message =
            "üëç Cukup baik! Terus berlatih menyusun kalimat yang benar.";
        } else {
          message =
            "üí™ Jangan menyerah! Latihan membaca kalimat akan memperkuat pemahaman Anda.";
        }

        document.getElementById("resultMessage").textContent = message;

        // Re-initialize feather icons
        feather.replace();
      }

      function nextLevel() {
        window.location.href = "level-9-teks-sederhana.html";
      }

      // Initialize quiz when page loads
      document.addEventListener("DOMContentLoaded", function () {
        initializeQuiz();
        feather.replace();
      });
    </script>
  </body>
</html>
